/*
 * Vanilla Form v. 2.1.0
 * Author: Michal Szepielak
 *
 * Product info and license terms:
 * http://codecanyon.net/item/vanilla-form-modern-responsive-contact-form/10447733
 */
var VanillaForm=function(a){"use strict";function b(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function c(a){var b=[];return a.each(function(a,c){b[a]=new h(c)}),b.length<=1?b[0]:b}function d(){var a="9320087105434084715";return a=a.split(""),a=a.reverse().join("")}function e(a){a.formFocused=!0}function f(a,b){var c,d=document.querySelectorAll("[name="+b.name+"]");for(c=0;c<d.length;c++)d[c].classList.remove("error"),d[c].removeEventListener("focus",k[b.name],!1);delete k[b.name],k.length--,k.length<=0&&(k.length=0,a.setSubmitState("initial"))}function g(b){var c=b.getBoundingClientRect(),d=Math.round(c.top)-5,e=a.innerHeight;return 0>=d?void a.scrollBy(0,d):void(d>=e&&a.scrollBy(0,d-e+30))}function h(d){var e,f=this;return a.jQuery&&d instanceof a.jQuery?c(d):d?h.getInstanceByElement(d)instanceof h?(console.warn("Duplicate initiation of form %s was prevented",d.getAttribute(i)),h.getInstanceByElement(d)):(e=b(),d.setAttribute(i,e),l[e]=f,f.dict={markedAsSpamError:"Your message was marked as spam and was not sent! Fix your message!",markedAsSpamServerError:"Your message was marked as SPAM and was not send.",sendSuccess:"We have received your inquiry. Stay tuned, weâ€™ll get back to you very soon.",sendError:"Mail server has experienced an error. Please try again.",httpRequestError:"[%s] There was a problem with receiving response from mailing server",timeoutError:"Your request was timeout. Please try again.",parseResponseError:"Response from mailing server was unclear. Please contact administrator.",httpRequestConnectionError:"We couldn't connect to the server because of connection error. Please try again."},f.responseTimeout=5e3,f.httpRequest=null,f.url=d.action||location.href,f.form=d,f.processing=!1,f.submitButton=d.querySelector('[type="submit"]'),f.submitButton?(f.notificationBox=d.querySelector(".notification-box"),f.notificationBox?(f.notificationBox.addEventListener("click",function(){this.classList.remove("show-error"),this.classList.remove("show-success")},!1),f.formFocused=!1,f.focusBound=null,f.init(),f):(console.warn("Couldn't bind to submit button"),null)):(console.warn("Couldn't bind to submit button"),null)):(console.warn("Couldn't bind to form element"),null)}var i="data-vf-id",j="vanillaSendSuccess",k={length:0},l={};return h.prototype.logError=function(a){this.notify(a,"error")},h.prototype.notify=function(a,b){var c=this.notificationBox;return c?(c.innerHTML=a,c.classList.add("show-"+(b||"error")),void g(c)):void console.warn("Notification box not found")},h.prototype.setSubmitState=function(a){var b=this,c=b.submitButton,d=c.getAttribute("data-"+a),e=c.className.replace(/state-[a-z]+/gi,"");b.processing="processing"===a,c.className=e+" state-"+a,c.value=d},h.prototype.validateForm=function(){var b,c,e,g=this,h=g.form,i=h.elements,j=!1,l=!1,m=/^([\w\-]+(?:\.[\w\-]+)*)@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;for(c=i.length-1;c>=0;--c)e=i[c],k[e.name]&&f(g,e);for(c=i.length-1;c>=0;--c)e=i[c],j=!1,""===e.value&&e.required?j=!0:("checkbox"===e.type&&e.required&&!e.checked&&(j=!0),"email"!==e.type||""===e.value||m.test(e.value)||(j=!0),"radio"===e.type&&e.required&&(document.querySelector("[name="+e.name+"]:checked")||(j=!0))),j?(e.classList.add("error"),k[e.name]||(k[e.name]=f.bind(null,g,e),k.length++),e.addEventListener("focus",k[e.name],!1),l=!0):e.classList.remove("error"),l&&g.setSubmitState("error");if(!l){if(g.formFocused!==!0)return g.logError(g.dict.markedAsSpamError),!1;b=h.querySelector('[name="contact_secret"]'),b||(b=document.createElement("input"),b.type="hidden",b.name="contact_secret",h.appendChild(b)),b.value=d()}return setTimeout(function(){a.scrollBy(0,-1)},1),!l},h.prototype.resetForm=function(){var a,b,c=this,d=c.form,e=c.submitButton;for(b=d.length-1;b>=0;--b)a=d[b],a!==e&&(a.classList.remove("success"),a.value="");c.setSubmitState("initial")},h.prototype.successForm=function(){var a,b=this,c={bubbles:!1,cancelable:!0,detail:b};a=new CustomEvent(j,c),b.form.dispatchEvent(a),a.defaultPrevented||(b.setSubmitState("success"),b.notify(b.dict.sendSuccess,"success"))},h.prototype.processResponse=function(a){var b,c=this,d=c.dict;try{b=JSON.parse(a)}catch(e){console.error(e),b={result:"ParseError"}}switch(b.result){case"OK":c.successForm(d.sendSuccess),setTimeout(c.resetForm.bind(c),4e3);break;case"NO_SPAM":c.logError(d.markedAsSpamServerError);break;case"SEND_ERROR":c.logError(d.sendError),c.setSubmitState("initial");break;case"ParseError":c.logError(d.parseResponseError)}},h.prototype.requestStateChange=function(){var a=this,b=a.httpRequest;4===b.readyState&&(200===b.status?a.processResponse(b.responseText):(a.setSubmitState("initial"),0===b.status?a.logError(a.dict.httpRequestConnectionError):a.logError(a.dict.httpRequestError.replace("%s",b.status))))},h.prototype.init=function(){var b,c,d=this,f=d.form,g=d.submitButton,h=f.elements;if(f.addEventListener("submit",d.submitForm.bind(d),!0),a.XMLHttpRequest?d.httpRequest=new XMLHttpRequest:a.ActiveXObject("Microsoft.XMLHTTP")&&(d.httpRequest=new ActiveXObject("Microsoft.XMLHTTP")),d.focusBound=e.bind(null,d),!d.httpRequest)return console.error("Couldn't init XMLHttpRequest"),null;for(d.formFocused=!1,c=h.length-1;c>=0;--c)b=h[c],"submit"!==b.type&&b.addEventListener("focus",d.focusBound,!1);g.value!==g.getAttribute("data-initial")&&(g.setAttribute("data-initial",g.value),d.setSubmitState("initial"))},h.prototype.send=function(a){var b=this,c=b.httpRequest;c.open("POST",b.url,!0),c.timeout=b.responseTimeout,c.ontimeout=function(){b.logError(b.dict.timeoutError),b.setSubmitState("initial")},c.send(a),c.onreadystatechange=b.requestStateChange.bind(b)},h.prototype.submitForm=function(a){var b=this,c="";return a&&(a.preventDefault(),a.stopPropagation()),b.processing?void 0:(b.validateForm()&&(b.setSubmitState("processing"),c=new FormData(b.form),b.send(c)),!1)},h.getInstanceByElement=function(a){var b=a.getAttribute(i)||"";return l.hasOwnProperty(b)?l[b]:null},h}(window);